---
title: "Execution of paradiddles"
author: '[Guillermo Montero-Melis](https://www.mpi.nl/people/montero-melis-guillermo)'
date: '`r as.character(format(Sys.Date(), format="%d/%m/%Y"))`'
output:
  html_document:
    depth: 2
    number_sections: yes
    theme: default
    toc: yes
    code_folding: hide

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


Introduction
============

Check visually how the paradiddles are executed. This is useful to test the
drumpads and check they are registering the taps.


Setup workspace
===============

Libraries:

```{r, message=FALSE, warning=FALSE}
library("knitr")
library("tidyverse")  # ggplot2, dplyr, readr, purrr, etc
theme_set(theme_bw())
```


Source file where all the functions are defined:

```{r, message = FALSE}
source("analysis/myfunctions/paradiddle_fncs.R")
```



Extract info
=============

Extract the info we need from the log file.

```{r}
# by default (if no argument) user picks log file from menu
log_ex <- extract_tap_info()
# log_ex <- extract_tap_info("data/10_sp13_replication_swe_2020_Nov_13_1104.log")
with(log_ex, table(routine, condition))
```

Trials that need to be excluded?
===============================

```{r}
trials <- compute_valid(log_ex)
valid_trials <- compute_valid_summary(trials)
```

How many?

```{r}
kable(valid_trials, digits = 3)
```

Which ones?

```{r}
trials %>%
  filter(valid == 0) %>%
  kable(digits = 3)
```




Visualize
=========

For the first practice trials there should be no tapping, so if this plot is not
empty there is a problem:

```{r, fig.height=2}
plot_taps(log_ex, "word_presentation_practice")
```


Block-specific training trials:

```{r}
plot_taps(log_ex, "word_presentation_training")
```

Real trials:

```{r, fig.height=10}
plot_taps(log_ex, "word_presentation")
```
